<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" type="text/css" href="classy.css">
  </head>
  <body>
    <h1 id = "pageTop"></h1>
    
    <div class = inputVals>
      <form>
        <br>Goat</br>
        <div class= "userName"> <input type="text" id="handle"> 
        </div>
        <br>Scream</br>
        <div class = 'message'> 
          <textarea cols="50" rows="4" id="comment"></textarea>
        </div>
      </form>
    
    <button ztype="button">BAAAAA!</button>
    </div>
    <script>
     addRow = function(goats,goatCall,goatTime){
         if (!document.getElementsByTagName) return;
         tabBody=document.getElementsByTagName("tbody").item(0);
         row=document.createElement("tr");
         cell1 = document.createElement("td");
         cell2 = document.createElement("td");
         cell3 = document.createElement("td");
         textnode1=document.createTextNode("@" + goats);
         textnode2=document.createTextNode(goatCall);
         textnode3=document.createTextNode(goatTime);
         cell1.appendChild(textnode1);
         cell2.appendChild(textnode2);
         cell3.appendChild(textnode3);
         row.appendChild(cell1);
         row.appendChild(cell2);
         row.appendChild(cell3);
         tabBody.appendChild(row);


    };
     updateLures = function(startTrigger){
        
        if (startTrigger === "startTrigger"){
          var index = 0}
        else{
          index = +$index;};
          
        allLures = streams.home.length - 1;
        while(index <= allLures){
          var tweet = streams.home[index];
          addRow(tweet.user,tweet.message,tweet.created_at);
          index += 1;
        };
        
        $index = index;
      };

      
      $(document).ready(function(){
        updateLures('startTrigger');
        $("#pageTop").text("TwitterGoat");

        $(".inputVals").on('click','button', function(){
              var handleToAdd = document.getElementById('handle').value;
              var messageToAdd = document.getElementById('comment').value;
              (streams.home).push({"user" : handleToAdd, "message" : messageToAdd, "created_at": new Date()});
          updateLures();
        
        })

       
      });

    </script>
    <div id = "tweetTable">
      <table border='1' id='mytable'>
        <tbody>
          <tr>
            <th>Goat</th>
              <th>Scream!</th>
              <th>Time</th>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html>
