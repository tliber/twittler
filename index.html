<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" type="text/css" href="classy.css">
  </head>
  <body>
    <h1 id = "pageTop"></h1>
    
    <div class = inputVals>
      <form>
        <br>Handle:</br>
        <div class= "userName"> <input type="text" id="handle"> 
        </div>
        <br>Lure:</br>
        <div class = 'message'> 
          <textarea cols="50" rows="4" id="comment"></textarea>
        </div>
      </form>
    
    <button type="button">Give it to me!</button>
    </div>
    <script>
     
     updateLures = function(startTrigger){
        
        if (startTrigger === "startTrigger"){
          var index = 0}
        else{
          index = +$index;};
          
        allLures = streams.home.length - 1;
        while(index <= allLures){
          var tweet = streams.home[index];
          var $tweet = $('<div></div>');
          // console.log((tweet.created_at).getDate());
          $tweet.text('@' + tweet.user + ': ' + tweet.message + '   created on:  ' + tweet.created_at);
          var $body = $('body');
          $tweet.appendTo($body);
          index += 1;
        };
        
        $index = index;
      };

      
      $(document).ready(function(){
        updateLures('startTrigger');
        // var $body = $('body');w
        $("#pageTop").text("Twittlure");

        $(".inputVals").on('click','button', function(){
              var handleToAdd = document.getElementById('handle').value;
              var messageToAdd = document.getElementById('comment').value;
              (streams.home).push({"user" : handleToAdd, "message" : messageToAdd, "created_at": new Date()});
          updateLures();
        
        })

       
      });

    </script>
  </body>
</html>
